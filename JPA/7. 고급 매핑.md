# ê³ ê¸‰ ë§¤í•‘

+ ìƒì† ê´€ê³„ ë§¤í•‘
  + ê°ì²´ì˜ ìƒì†ê´€ê³„ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì–´ë–»ê²Œ ë§¤í•‘í•˜ëŠ”ê°€?
+ @MappedSuper
  + ë“±ë¡ì¼, ìˆ˜ì •ì¼ ê°™ì´ ì—¬ëŸ¬ ì—”í‹°í‹°ì—ì„œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë§¤í•‘ ì •ë³´ë§Œ ìƒì†ë°›ê³ ì‹¶ì€ ê²½ìš°
+ ë³µí•© í‚¤ì™€ ì‹ë³„ê´€ê³„ë§¤í•‘
  + ë°ì´í„°ë² ì´ìŠ¤ì˜ ì‹ë³„ìê°€ í•˜ë‚˜ ì´ìƒì¼ ë•Œ ë§¤í•‘í•˜ëŠ” ë°©ë²•
  + ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ì—ì„œ ì´ì•¼ê¸°í•˜ëŠ” ì‹ë³„ê´€ê³„ì™€ ë¹„ì‹ë³„ê´€ê³„ì— ëŒ€í•œ ì–¸ê¸‰
+ ì¡°ì¸ í…Œì´ë¸”
  + í…Œì´ë¸”ì€ ì™¸ë˜ í‚¤ í•˜ë‚˜ë¡œ ì—°ê´€ê´€ê³„ë¥¼ ë§ºì„ ìˆ˜ ìˆì§€ë§Œ ì—°ê´€ê´€ê³„ë¥¼ ê´€ë¦¬í•˜ëŠ” ì—°ê²° í…Œì´ë¸”ì„ ë‘ëŠ” ë°©ë²•ë„ ì¡´ì¬
+ ì—”í‹°í‹° í•˜ë‚˜ì— ì—¬ëŸ¬ í…Œì´ë¸” ë§¤í•‘í•˜ê¸°



## ìƒì† ê´€ê³„ ë§¤í•‘

> ê´€ê³„í˜• DB - ìƒì†ì˜ ê°œë… X
>
> > ìŠˆí¼íƒ€ì… - ì„œë¸Œíƒ€ì… ê´€ê³„(Super-Type Sub-Type Relationship)ë¼ëŠ” ëª¨ë¸ë§ ê¸°ë²•ì´ ê°€ì¥ ìœ ì‚¬

<img src="https://user-images.githubusercontent.com/101400894/177331801-e4d4fc4d-def4-484b-9c82-0e9ca1ac0357.png" alt="image" style="zoom:80%;" align="left"/>



#### ìŠˆí¼íƒ€ì… ì„œë¸Œíƒ€ì… ë…¼ë¦¬ ëª¨ë¸ì„ ì‹¤ì œ ë¬¼ë¦¬ ëª¨ë¸ì¸ í…Œì´ë¸”ë¡œ êµ¬í˜„í•˜ëŠ” ë°©ë²•

1. ê°ê°ì˜ í…Œì´ë¸”ë¡œ ë³€í™˜
   + ê°ê°ì„ ëª¨ë‘ í…Œì´ë¸”ë¡œ ë§Œë“¤ê³  ì¡°íšŒí•  ë•Œ ì¡°ì¸ì„ ì‚¬ìš©
   + **ì¡°ì¸ ì „ëµ**
2. í†µí•© í…Œì´ë¸”ë¡œ ë³€í™˜
   + í…Œì´ë¸” í•˜ë‚˜ë§Œ ì‚¬ìš©í•´ì„œ í†µí•©
   + **ë‹¨ì¼ í…Œì´ë¸” ì „ëµ**
3. ì„œë¸Œíƒ€ì… í…Œì´ë¸”ë¡œ ë³€í™˜
   + ê·¸ë¦¼ 7.5ì™€ ê°™ì´ ì„œë¸Œíƒ€ì…ë§ˆë‹¤ í•˜ë‚˜ì˜ í…Œì´ë¸”ì„ ë§Œë“¦
   + **êµ¬í˜„ í´ë˜ìŠ¤ë§ˆë‹¤ í…Œì´ë¸” ì „ëµ**



### ì¡°ì¸ ì „ëµ

<img src="https://user-images.githubusercontent.com/101400894/177332444-65ef6153-18f2-466d-84e3-6353a3de97ba.png" alt="image" style="zoom:77%;" align="left"/>

+ ì—”í‹°í‹° ê°ê°ì„ ëª¨ë‘ í…Œì´ë¸”ë¡œ ìƒì„±, ìì‹ í…Œì´ë¸”ì´ ë¶€ëª¨ í…Œì´ë¸” ê¸°ë³¸í‚¤ë¥¼ ë°›ì•„ ê¸°ë³¸í‚¤ + ì™¸ë˜í‚¤ë¡œ ì‚¬ìš©í•˜ëŠ” ì „ëµ
+ í…Œì´ë¸”ì€ íƒ€ì…ì˜ ê°œë…ì´ ì—†ì–´ **íƒ€ì…ì„ êµ¬ë¶„í•˜ëŠ” ì»¬ëŸ¼**ì„ ì¶”ê°€ (DTYPE ì»¬ëŸ¼ì„ êµ¬ë¶„ì»¬ëŸ¼ìœ¼ë¡œ ì‚¬ìš©)

```java
@Entity
@Inheritance(strategy = InheritanceType.JOINED) --- 1.
@DiscriminatorColumn(name = "DTYPE") --- 2.
public abstract class Item {

    @GeneratedValue @Id
    private Long id;
		...
}

@Entity
@DiscriminatorValue("A") --- 3.
@PrimaryKeyJoinColumn(name = "ALBUM_ID")  --- 4.
public class Album extends Item {
		private String artist;
		...
}

@Entity
@DiscriminatorValue("M")
public class Movie extends Item{
    private String director;
    private String actor;
}
```

+ @Inheritance(strategy = InheritanceType.JOINED)

  - ìƒì† ë§¤í•‘ì€ ë¶€ëª¨ í´ë˜ìŠ¤ì— `@Inheritance`ë¥¼ ì‚¬ìš©

  - ë§¤í•‘ ì „ëµì„ ì§€ì •í•´ì•¼í•˜ë©°, ì—¬ê¸°ì„  **ì¡°ì¸ ì „ëµì„ ì‚¬ìš©** (`InheritanceType.JOINED`)

+ @DiscriminatorColumn(name = "DTYPE")

  - ë¶€ëª¨ í´ë˜ìŠ¤ì— êµ¬ë¶„ ì»¬ëŸ¼ì„ ì§€ì •, ì´ ì»¬ëŸ¼ì„ í†µí•´ ì €ì¥ëœ ìì‹ í…Œì´ë¸”ì„ êµ¬ë¶„

  - ê¸°ë³¸ê°’ì´ DTYPEì´ë¯€ë¡œ `@DiscriminatorColumn`ìœ¼ë¡œ ì¤„ì—¬ì„œ ì‚¬ìš© ê°€ëŠ¥

+ @DiscriminatorValue("A")
  - êµ¬ë¶„ ì»¬ëŸ¼ì— ì…ë ¥í•  ê°’ì„ ì§€ì •

+ @PrimaryKeyJoinColumn(name = "ALBUM_ID")

  - ê¸°ë³¸ ê°’ìœ¼ë¡œ ìì‹ í…Œì´ë¸”ì€ ë¶€ëª¨ í…Œì´ë¸”ì˜ ID ì»¬ëŸ¼ëª…ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©

  - **ìì‹ í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ ì»¬ëŸ¼ëª…ì„ ë³€ê²½í•˜ê³  ì‹¶ì„ë•Œ** `@PrimaryKeyJoinColumn` ì‚¬ìš©



#### ì¥ì 

- í…Œì´ë¸”ì´ ì •ê·œí™” ëŒ

- ì™¸ë˜ í‚¤ ì°¸ì¡° ë¬´ê²°ì„± ì œì•½ì¡°ê±´ì„ í™œìš©

- ì €ì¥ê³µê°„ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©



#### ë‹¨ì 

- ì¡°íšŒí•  ë•Œ ì¡°ì¸ì´ ë§ì´ ì‚¬ìš©ë¨ìœ¼ë¡œ ì„±ëŠ¥ ì €í•˜

- ì¡°íšŒ ì¿¼ë¦¬ê°€ ë³µì¡

- ë°ì´í„°ë¥¼ ë“±ë¡í•  ë•Œ INSERT SQLì„ ë‘ ë²ˆ ì‹¤í–‰



âœ”ê´€ë ¨ ì–´ë…¸í…Œì´ì…˜

> @PrimaryKeyJoinColumn, DiscriminatorColumn, @DistcriminatorValue



### ë‹¨ì¼ í…Œì´ë¸” ì „ëµ

- í…Œì´ë¸”ì„ í•˜ë‚˜ë§Œ ì‚¬ìš©í•˜ë©°, êµ¬ë¶„ ì»¬ëŸ¼(DTYPE)ìœ¼ë¡œ ìì‹ ë°ì´í„°ë¥¼ êµ¬ë¶„ (ì¼ë°˜ì ìœ¼ë¡œ ê°€ì¥ ë¹ ë¦„)

**<ì£¼ì˜ì >**

- ìì‹ ì—”í‹°í‹°ê°€ ë§¤í•‘í•œ ì»¬ëŸ¼ì€ ëª¨ë‘ nullì„ í—ˆìš© (ì—”í‹°í‹°ì— ë”°ë¼ ì‚¬ìš©í•˜ëŠ” ì»¬ëŸ¼ì´ ë‹¤ë¦„)

<img src="https://user-images.githubusercontent.com/101400894/177334188-dc754e4e-a69b-4bff-a19e-2b91d62488e6.png" alt="image" style="zoom:60%;" align="left"/>

```java
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "DTYPE")
public abstract class Item {

    @GeneratedValue @Id
		@Column(name = "ITEM_ID")
    private Long id;
		...
}

@Entity
@DiscriminatorValue("A")
public class Album extends Item {...}

@Entity
@DiscriminatorValue("M")
public class Movie extends Item {...}

@Entity
@DiscriminatorValue("B")
public class Book extends Item {...}
```

+ @Inheritance(strategy = InheritanceType.SINGLE_TABLE)
  + ë‹¨ì¼í…Œì´ë¸” ì „ëµ ì‚¬ìš©
  + êµ¬ë¶„ ì»¬ëŸ¼ì„ í•„ìˆ˜ë¡œ ì‚¬ìš©



#### ì¥ì 

- ì¡°ì¸ì´ í•„ìš” ì—†ì–´ ì¡°íšŒ ì„±ëŠ¥ì´ ë¹ ë¦„

- ì¡°íšŒ ì¿¼ë¦¬ê°€ ë‹¨ìˆœ

#### ë‹¨ì 

- ìì‹ ì—”í‹°í‹°ê°€ ë§¤í•‘í•œ ì»¬ëŸ¼ì€ ëª¨ë‘ null í—ˆìš©

- ë‹¨ì¼ í…Œì´ë¸”ì— ëª¨ë‘ ì €ì¥í•˜ì—¬ í…Œì´ë¸”ì´ ì»¤ì§ˆ ìˆ˜ ìˆìŒ, ê·¸ëŸ° ê²½ìš° ì¡°íšŒ ì„±ëŠ¥ì´ ëŠë¦¼

#### íŠ¹ì§•

- í…Œì´ë¸” í•˜ë‚˜ì— ëª¨ë“  ê²ƒì„ í†µí•©í•˜ì—¬ êµ¬ë¶„ ì»¬ëŸ¼ì´ í•„ìˆ˜(`@DisciminatorColumn`)

- `@DiscriminatorValue`ë¥¼ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ê°’ì´ ì—”í‹°í‹° ì´ë¦„ (Album)



### êµ¬í˜„ í´ë˜ìŠ¤ë§ˆë‹¤ í…Œì´ë¸” ì „ëµ

<img src="https://user-images.githubusercontent.com/101400894/177335539-9f2f9214-50bb-4be1-b9ea-88daed703bf0.png" alt="image" style="zoom:80%;" align="left"/>

+ **ìì‹ ì—”í‹°í‹°ë§ˆë‹¤ í…Œì´ë¸”ì„ ìƒì„±**, ê°ê° í•„ìš”í•œ ì»¬ëŸ¼ì´ ì¡´ì¬
+ **ì¼ë°˜ì ìœ¼ë¡œ ì¶”ì²œí•˜ì§€ ì•ŠëŠ” ì „ëµ**

```java
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
@DiscriminatorColumn(name = "DTYPE")
public abstract class Item {

    @GeneratedValue @Id
		@Column(name = "ITEM_ID")
    private Long id;

		...
}

@Entity
public class Album extends Item {...}

@Entity
public class Movie extends Item {...}

@Entity
public class Book extends Item {...}
```



#### ì¥ì 

- ì„œë¸Œ íƒ€ì…ì„ êµ¬ë¶„í•´ì„œ ì²˜ë¦¬í•  ë•Œ íš¨ê³¼ì 

- not null ì œì•½ ì¡°ê±´ ì‚¬ìš© ê°€ëŠ¥

#### ë‹¨ì 

- ì—¬ëŸ¬ ìì‹ í…Œì´ë¸”ì„ í•¨ê»˜ ì¡°íšŒí•  ê²½ìš° ì„±ëŠ¥ì´ ëŠë¦¼ (SQL UNION ì‚¬ìš©)

- ìì‹ í…Œì´ë¸”ì„ í†µí•©í•˜ê¸° ì–´ë ¤ì›€

#### íŠ¹ì§•

- êµ¬ë¶„ ì»¬ëŸ¼ì´ì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ





## @MappedSuperclass

> í…Œì´ë¸”ê³¼ ë§¤í•‘í•˜ì§€ ì•Šê³  ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ëŠ” ìì‹ í´ë˜ìŠ¤ì—ê²Œ ë§¤í•‘ ì •ë³´ë§Œ ì œê³µ

+ ì¶”ìƒ í´ë˜ìŠ¤ì™€ ë¹„ìŠ·í•˜ë©° **@MappedSuperclassëŠ” ì‹¤ì œ í…Œì´ë¸”ê³¼ ë§¤í•‘ë˜ì§€ ì•ŠìŒ**

<img src="https://user-images.githubusercontent.com/101400894/177364642-31bc13b8-4a97-4f60-bd99-6e50b4df81fb.png" alt="image" style="zoom:60%;" align="left"/>

```java
@MappedSuperclass
public abstract class BaseEntity {
		@Id @GeneratedValue
		private Long id;
		private String name;
		...
}

@Entity
public class Member extends BaseEntity {
		//ID ìƒì†
		//NAME ìƒì†
		private String email;
}

@Entity
public class Seller extends BaseEntity {
		//ID ìƒì†
		//NAME ìƒì†
		private String shopName;
}
```

+ `BaseEntity`ì—ëŠ” ê³µí†µ ë§¤í•‘ ì •ë³´ë¥¼ ì •ì˜, ìƒì†ë°›ì€ ì—”í‹°í‹°ëŠ” ë§¤í•‘ ì •ë³´ë¥¼ ë¬¼ë ¤ ë°›ì•„ì„œ ì‚¬ìš©

+ ë¶€ëª¨ë¡œ ë¬¼ë ¤ë°›ì€ ë§¤í•‘ ì •ë³´ë¥¼ ì¬ì •ì˜í•˜ë ¤ë©´ `@AttributeOverrides`ë‚˜ `@AttributeOverride` ì‚¬ìš©

```java
@Entity
@AttibuteOverrides({
		@AttibuteOverride(name = "id", column = @Column(name = "MEMBER_ID")),
		@AttibuteOverride(name = "name", column = @Column(name = "MEMBER_NAME")),
})
public class Member extends BaseEntity {...}
```



### MappedSuperclass íŠ¹ì§•

+ í…Œì´ë¸”ê³¼ ë§¤í•‘ë˜ì§€ ì•Šê³  ìì‹ ì—”í‹°í‹°ì˜ ë§¤í•‘ ì •ë³´ë¥¼ ìƒì†í•˜ê¸° ìœ„í•´ ì‚¬ìš©
+ `@MappedSuperclass`ëŠ” ì—”í‹°í‹°ê°€ ì•„ë‹ˆë¯€ë¡œ `em.find()`, `JPQL`ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ
+ **ì´ í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ìƒì„±í•  ì¼ì€ ì—†ìœ¼ë¯€ë¡œ** **ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ê¶Œì¥**
+ ë“±ë¡ì¼ì, ìˆ˜ì •ì¼ì, ë“±ë¡ì, ìˆ˜ì •ì ë“± ê³µí†µ ì†ì„±ì„ íš¨ê³¼ì ìœ¼ë¡œ ê´€ë¦¬



ğŸ“ŒEntityëŠ” Entityë‚˜ @MappedSuperclassë§Œ ìƒì† ê°€ëŠ¥





## ë³µí•© í‚¤ì™€ ì‹ë³„ê´€ê³„ ë§¤í•‘

### ì‹ë³„ê´€ê³„

> ë¶€ëª¨ í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ë¥¼ ë‚´ë ¤ë°›ì•„ ìì‹ í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ + ì™¸ë˜ í‚¤ë¡œ ì‚¬ìš©í•˜ëŠ” ê´€ê³„

<img src="https://user-images.githubusercontent.com/101400894/177449653-034cb665-ef18-4f08-9e98-e6606fbda008.png" alt="image" style="zoom:80%;" align="left"/>



### ë¹„ì‹ë³„ ê´€ê³„

> ë¶€ëª¨ í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ë¥¼ ë°›ì•„ì„œ ìì‹ í…Œì´ë¸”ì˜ ì™¸ë˜ í‚¤ë¡œë§Œ ì‚¬ìš©í•˜ëŠ” ê´€ê³„

<img src="https://user-images.githubusercontent.com/101400894/177450050-b6a71236-2a7f-4175-aced-ef2e028f9864.png" alt="image" style="zoom:80%;" align="left"/>

+ **í•„ìˆ˜ì  ë¹„ì‹ë³„ ê´€ê³„(Mandatory)**: ì™¸ë˜ í‚¤ì— NULLì„ í—ˆìš©í•˜ì§€ ì•ŠìŒ, ì—°ê´€ê´€ê³„ê°€ í•„ìˆ˜ì 
+ **ì„ íƒì  ë¹„ì‹ë³„ ê´€ê³„(Optional)**: ì™¸ë˜ í‚¤ì— NULLì„ í—ˆìš©, ì—°ê´€ê´€ê³„ê°€ ì„ íƒì 



### ë³µí•© í‚¤ : ë¹„ì‹ë³„ ê´€ê³„ ë§¤í•‘

>  JPAì—ì„œ ì‹ë³„ìë¥¼ ë‘˜ ì´ìƒ ì‚¬ìš©í•˜ë ¤ë©´ ë³„ë„ì˜ ì‹ë³„ì í´ë˜ìŠ¤ê°€ í•„ìš”

```java
@Entity
public class Hello {
		@Id
		private String id;
		@Id
		private String id2; //ì‹¤í–‰ ì‹œì ì—ì„œ ë§¤í•‘ ì˜ˆì™¸ ë°œìƒ
}
```

+ JPAëŠ” ë³µí•© í‚¤ë¥¼ ì§€ì›í•˜ê¸° ìœ„í•´ @IdClassì™€ @EmbeddedId 2ê°€ì§€ ë°©ë²•ì„ ì œê³µ
  + @IdClass : ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì— ê°€ê¹Œìš´ ë°©ë²•
  + @EmbeddedId : ê°ì²´ì§€í–¥ì— ê°€ê¹Œìš´ ë°©ë²•



#### @IdClass

<í˜„ ìƒí™©>

<img src="https://user-images.githubusercontent.com/101400894/177450888-5561dfc8-cc35-46be-bea9-86cc8843e2f3.png" alt="image" style="zoom:80%;" align="left"/>

+ `PARENT` í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ê°€ `PARENT_ID1`, `PARENT_ID2`**ì˜ ë³µí•©í‚¤ë¡œ** **ì‹ë³„ì í´ë˜ìŠ¤**ê°€ í•„ìš”

```java
//Parent í´ë˜ìŠ¤
@Entity
@IdClass(ParentId.class)
public class Parent {
		@Id
		@Column(name = "PARENT_ID1")
		private String id1; //ParentId.id1ê³¼ ì—°ê²°

		@Id
		@Column(name = "PARENT_ID2")
		private String id2; //ParentId.id2ê³¼ ì—°ê²°
		...
}

//ì‹ë³„ì í´ë˜ìŠ¤
public class ParentId implements Serializable {
		private String id1; //Parent.id1 ë§¤í•‘ 
		private String id2; //Parent.id2 ë§¤í•‘
		
		public ParentId() {
		}
		public ParentId(String id1, String id2) {
				this.id1 = id1;
				this.id2 = id2;
		}

		@Override
		public boolean equals(Object o) {...}
		@Override
		public int hashCode() {...}
}
```

##### ì‹ë³„ì í´ë˜ìŠ¤ì˜ ë§Œì¡± ì¡°ê±´

+ **ì‹ë³„ì í´ë˜ìŠ¤ì˜ ì†ì„±ëª…**ê³¼ **ì—”í‹°í‹°ì— ì‚¬ìš©í•˜ëŠ” ì‹ë³„ì ì†ì„±ëª…**ì´ **ë™ì¼**í•´ì•¼ í•¨
  + `Parent.id1` = `ParentId.id1`, `Parent.id2` = `ParentId.id2`
+ `Serializable` ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„
+ `equals`, `hashCode`ë¥¼ êµ¬í˜„
+ ê¸°ë³¸ ìƒì„±ì í•„ìš”
+ **ì‹ë³„ì í´ë˜ìŠ¤**ëŠ” `public`ìœ¼ë¡œ ì„ ì–¸

â€‹	

```java
//ì €ì¥
Parent parent = new Parent();
parent.setId1("myId1"); //ì‹ë³„ì
parent.setId2("myId2"); //ì‹ë³„ì
parent.setName("parentName");
em.persist(parent);

//ì¡°íšŒ
ParentId parentId = new ParentId("myId1", "myId2");
Parent parent = em.find(Parent.class, parentId);
```



```java
//Child í´ë˜ìŠ¤
@Entity
public class Child {
		@Id
		private String id;
		
		@ManyToOne
		@JoinColumns({
				@JoinColumn(name = "PARENT_ID1", referencedColumnName = "PARENT_ID1"),
				@JoinColumn(name = "PARENT_ID2", referencedColumnName = "PARENT_ID2")
		})
		private Parent parent;
}
```

+ ì™¸ë˜ í‚¤ê°€ ë³µí•©í‚¤ì´ë¯€ë¡œ `@JoinColumns`ì„ ì‚¬ìš©, ê°ê° ì™¸ë˜í‚¤ ì»¬ëŸ¼ì„ `@JoinColumn`ìœ¼ë¡œ ë§¤í•‘
+ `@JoinColumn`ì˜ `name`ê³¼ `referencedColumnName`ê°’ì´ ê°™ìœ¼ë©´ `referencedColumnName` ìƒëµ ê°€ëŠ¥



#### @EmbeddedId

```java
//Parent í´ë˜ìŠ¤
@Entity
public class Parent {
		@EmbeddedId
		private ParentId id;
		
		...
}

//ParentId ì‹ë³„ì í´ë˜ìŠ¤
@Embeddable
public class ParentId implements Serializable {
		@Column(name = "PARENT_ID1")
		private String id1;
		@Column(name = "PARENT_ID2")
		private String id2;		
		
		//equals and hashCode êµ¬í˜„
		...
}
```

**@EmbeddedIdë¥¼ ì ìš©í•œ ì‹ë³„ì í´ë˜ìŠ¤ì˜ ë§Œì¡± ì¡°ê±´**

- `@Embeddable` ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©

- `Serializable `ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„

- `equals`, `hashCode`ë¥¼ êµ¬í˜„

- ê¸°ë³¸ ìƒì„±ì í•„ìš”

- ì‹ë³„ì í´ë˜ìŠ¤ publicìœ¼ë¡œ ì„ ì–¸



```java
//ì €ì¥
Parent parent = new Parent();
ParentId parentId = new ParentId("myId1", "myId2");
parent.setId(parentId);
parent.setName("parentName");
em.persist(parent);

//ì¡°íšŒ
ParentId parentId = new ParentId("myId1", "myId2");
Parent parent = em.find(Parent.class, parentId);
```



#### ë³µí•© í‚¤ì™€ equals(), hashCode()

```java
ParentId id1 = new ParentId();
id1.setId1("myId1");
id1.setId2("myId2");

ParentId id2 = new ParentId();
id2.setId1("myId1");
id2.setId2("myId2");

id1.equals(id2) -> ê±°ì§“ (Object í´ë˜ìŠ¤ì˜ equals()ë¥¼ ê¸°ë³¸ ì‚¬ìš©í•˜ê¸°ì— ==ë¹„êµ(ë™ì¼ì„±)ë¥¼ ì‚¬ìš©)
```

+ í˜„ì¬ id1 ê³¼ id2 ì¸ìŠ¤í„´ìŠ¤ ë‘˜ë‹¤ myId1, myId2ë¼ëŠ” ê°™ì€ ê°’ì„ ê°€ì§€ê³  ìˆì§€ë§Œ ì¸ìŠ¤í„´ìŠ¤(ë™ì¼ì„±)ëŠ” ë‹¤ë¦„
+ ì‹ë³„ì ê°ì²´ì˜ ë™ë“±ì„±(equal ë¹„êµ)ì´ ì§€ì¼œì§€ì§€ ì•Šìœ¼ë©´ ì—”í‹°í‹°ë¥¼ ê´€ë¦¬í•˜ëŠ”ë° ì‹¬ê°í•œ ë¬¸ì œ ë°œìƒ
+ ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë³µí•© í‚¤ëŠ” `equals()`ì™€ `hashCode()`ë¥¼ í•„ìˆ˜ë¡œ êµ¬í˜„



#### @IdClass vs @EmbeddedId

> @EmbeddedIdê°€ @Idclassì™€ ë¹„êµí•´ì„œ ê°ì²´ì§€í–¥ì ì´ê³  ì¤‘ë³µì—†ëŠ” ì¥ì , JPQLì—ì„  ë‹¨ì 
>
> > ì·¨í–¥ì— ë§ê²Œ ì„ íƒ

```java
em.createQuery("select p.id.id1, p.id.id2 from Parent p"); //@EmbeddedId
em.createQuery("select p.id1, p.id2 from Parent p"); //@IdClass
```



ğŸ“Œë³µí•© í‚¤ì—ëŠ” @GenerateValueë¥¼ ì‚¬ìš© ëª»í•¨, ë³µí•© í‚¤ë¥¼ êµ¬ì„±í•˜ëŠ” ì—¬ëŸ¬ ì»¬ëŸ¼ ì¤‘ í•˜ë‚˜ì—ë„ ì‚¬ìš© ëª»í•¨



### ë³µí•© í‚¤ : ì‹ë³„ ê´€ê³„ ë§¤í•‘

> ë¶€ëª¨, ìì‹, ì†ìê¹Œì§€ ê¸°ë³¸ í‚¤ë¥¼ ì „ë‹¬í•˜ëŠ” ì‹ë³„ ê´€ê³„ êµ¬ì¡°

<img src="https://user-images.githubusercontent.com/101400894/177453124-3e9fb5fa-c7af-461d-a05c-c7131b9b2089.png" alt="image" style="zoom:80%;" align="left"/>



#### @Idclassì™€ ì‹ë³„ ê´€ê³„

```java
//ë¶€ëª¨
@Entity
public class Parent {
		@Id @Column(name = "PARENT_ID")
		private String id;
		...
}

//ìì‹
@Entity
@Idclass(ChildId.class)
public class Child {
		@Id
		@ManyToOne
		@JoinColumn(name = "PARENT_ID")
		public Parent parent;

		@Id @Column(name = "CHILD_ID")
		private String childId;
		...
}

//ChildId ì‹ë³„ì í´ë˜ìŠ¤
public class ChildId implements Serializable {
		private String parent; //Child.parent ë§¤í•‘
		private String childId; //Child.childId ë§¤í•‘
		
		//equlas, hashCode
		...
}

//ì†ì
@Entity
@IdClass(GrandChildId.class)
public class GrandChild {
		@Id
		@ManyToOne
		@JoinColumns({
				@JoinColumn(name = "PARENT_ID"),
				@JoinColumn(name = "CHILD_ID")
		})
		private Child child;
		
		@Id @Column(name = "GRANDCHILD_ID")
		private String id;
		...
}

//GrandChildId ì‹ë³„ì í´ë˜ìŠ¤
public class GrandChildId implements Serializable {
		private ChildId child; //GrandChild.child ë§¤í•‘
		private String id; //GrandChild.id ë§¤í•‘
		
		//equlas, hashCode
		...
}
```

+ ì‹ë³„ ê´€ê³„ëŠ” ê¸°ë³¸ í‚¤ì™€ ì™¸ë˜ í‚¤ë¥¼ ê°™ì´ ë§¤í•‘, `@Id`ì™€ `@ManyToOne`ì„ ê°™ì´ ì‚¬ìš©

  ```java
  @Id
  @ManyToOne
  @JoinColumn(name = "PARENT_ID")
  public Parent parent;
  ```

  

#### @EmbeddedIdì™€ ì‹ë³„ ê´€ê³„

> ì‹ë³„ ê´€ê³„ë¥¼ êµ¬ì„±í•  ë•Œ `@MapsId`ë¥¼ ì‚¬ìš©

```java
//ë¶€ëª¨
@Entity
public class Parent {
		@Id @Column(name = "PARENT_ID")
		private String id;
		...
}

//ìì‹
@Entity
public class Child {
		@EmbeddedId
		private ChildId id;

		@MapsId("parentId") //ChildId.parentId ë§¤í•‘
		@ManyToOne
		@JoinColumn(name = "PARENT_ID")
		public Parent parent;
		...
}

//ChildId ì‹ë³„ì í´ë˜ìŠ¤
@Embeddable
public class ChildId implements Serializable {
		private String parentId; //@MapsId("parentId")ë¡œ ë§¤í•‘
		
		@Column(name = "CHILD_ID")
		private String id;
		
		//equlas, hashCode
		...
}

//ì†ì
public class GrandChild {
		@EmbeddedId
		private GrandChildId id;
		
		@MapsId("childId") //GrandChildId.childId ë§¤í•‘
		@ManyToOne
		@JoinColumns({
				@JoinColumn(name = "PARENT_ID"),
				@JoinColumn(name = "CHILD_ID")
		})
		private Child child;
		...
}

//GrandChildId ì‹ë³„ì í´ë˜ìŠ¤
@Embeddable
public class GrandChildId implements Serializable {
		private ChildId childId; //@MapsId("childId")ë¡œ ë§¤í•‘
		
		@Column(name = "GRANDCHILD_ID")
		private String id;

		//equlas, hashCode
		...
}
```

+ `@IdClass`ì™€ ë‹¤ë¥¸ ì ì€ `@Id` ëŒ€ì‹  `@MapsId`ë¥¼ **ì‚¬ìš©**
+ `@MapsId`ëŠ” **ì™¸ë˜ í‚¤ì™€ ë§¤í•‘í•œ ì—°ê´€ê´€ê³„ë¥¼ ê¸°ë³¸ í‚¤ì—ë„ ë§¤í•‘**í•œë‹¤ëŠ” ì˜ë¯¸
+ `@MapsId`ì˜ **ì†ì„± ê°’**ì€ `@EmbeddedId`ë¥¼ ì‚¬ìš©í•œ **ì‹ë³„ì í´ë˜ìŠ¤ì˜ ê¸°ë³¸ í‚¤ í•„ë“œë¥¼ ì§€ì •**



### ë¹„ì‹ë³„ ê´€ê³„ë¡œ êµ¬í˜„(ë³µí•© í‚¤ê°€ ì—†ëŠ” ê²½ìš°)

<img src="https://user-images.githubusercontent.com/101400894/177454929-f8b64a63-9fc8-43db-9905-481284671647.png" alt="image" style="zoom:80%;" align="left"/>

````java
//ë¶€ëª¨
@Entity
public class Parent {
		@Id @GeneratedValue
		@Column(name = "PARENT_ID")
		private Long id;
		...
}

//ìì‹
@Entity
public class Child {
		@Id @GeneratedValue
		@Column(name = "CHILD_ID")
		private Long id;
		private String name;
		
		@ManyToOne
		@JoinColumn(name = "PARENT_ID")
		private Parent parent;
		...
}

//ì†ì
@Entity
public class GrandChild {
		@Id @GeneratedValue
		@Column(name = "GRANDCHILD_ID")
		private Long id;
		private String name;

		@ManyToOne
		@JoinColumn(name = "CHILD_ID")
		private Child child;
		...
}
````



### ì¼ëŒ€ì¼ ì‹ë³„ ê´€ê³„

> ì¼ëŒ€ì¼ ì‹ë³„ ê´€ê³„ëŠ” ë¶€ëª¨í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ë¥¼ ìì‹í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ ë° ì™¸ë˜ í‚¤ë¡œ ì‚¬ìš©

<img src="https://user-images.githubusercontent.com/101400894/177455153-63082d4b-a4dd-4208-9c42-2b8dfabb10dd.png" alt="image" style="zoom:90%;" align="left"/>

```java
//ë¶€ëª¨
@Entity
public class Board {
		@Id @GeneratedValue
		@Column(name = "BOARD_ID")
		private Long id;
		private String title;

		@OneToOne(mappedBy = "board")
		private BoardDetail boardDetail;
		...
}

//ìì‹
@Entity
public class BoardDetail {
		@Id
		private Long boardId;

		@MapsId //BoardDetail.boardId ë§¤í•‘
		@OneToOne
		@JoinColumn(name = "BOARD_ID")
		private Board board;
		
    	private String content;
}
```

+ @MapsIdëŠ” @Idë¥¼ ì‚¬ìš©í•´ì„œ ì‹ë³„ìë¡œ ì§€ì •í•œ BoardDetail.boardIdì™€ ë§¤í•‘
+ BoardDetailì²˜ëŸ¼ ì‹ë³„ìê°€ ë‹¨ìˆœíˆ ì»¬ëŸ¼í•˜ë‚˜ë©´ @MapsIdì˜ ì†ì„±ì—†ì´ ì‚¬ìš© ê°€ëŠ¥

```java
//ì €ì¥
public void save() {
		Board board = new Board();
		board.setTitle("ì œëª©");
		em.persist(board);

		BoardDetail boardDetail = new BoardDetail();
		boardDetail.setContent("ë‚´ìš©");
		boardDetail.setBoard(board);
		em.persist(boardDetail);
}
```





### ì‹ë³„, ë¹„ì‹ë³„ ê´€ê³„ì˜ ì¥ë‹¨ì 

#### ë¹„ì‹ë³„ ê´€ê³„ì˜ ì¥ì 

[ **ë°ì´í„° ë² ì´ìŠ¤ ì„¤ê³„ ê´€ì  ]**

- ì‹ë³„ ê´€ê³„ëŠ” ë¶€ëª¨ í…Œì´ë¸” ê¸°ë³¸ í‚¤ë¥¼ ìì‹ í…Œì´ë¸”ë¡œ ì „íŒŒí•˜ë©° ìì‹ í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ ì»¬ëŸ¼ ì¦ê°€

- 2ê°œ ì´ìƒì˜ ì»¬ëŸ¼ì„ í•©í•´ ë³µí•© ê¸°ë³¸ í‚¤ë¥¼ ë§Œë“¤ì–´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë¹ˆë²ˆ

- ì‹ë³„ ê´€ê³„ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ë¯¸ê°€ ìˆëŠ” ìì—° í‚¤ ì»¬ëŸ¼ì„ ì¡°í•© ë°˜ë©´, ë¹„ì‹ë³„ ê´€ê³„ì˜ ê¸°ë³¸í‚¤ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ì™€ ê´€ê³„ì—†ëŠ” ëŒ€ë¦¬ í‚¤ë¥¼ ì‚¬ìš© â†’ ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ì€ ì‹œê°„ì´ ì§€ë‚˜ë©´ ë³€ê²½ë˜ë¯€ë¡œ ìì—°í‚¤ê°€ ì „íŒŒë˜ë©´ ë³€ê²½ì´ ì–´ë ¤ì›€

- ë¶€ëª¨í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ë¥¼ ìì‹ í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ë¡œ ì‚¬ìš©í•˜ë¯€ë¡œ ì‹ë³„ ê´€ê³„ëŠ” ë¹„ì‹ë³„ ê´€ê³„ë³´ë‹¤ í…Œì´ë¸” êµ¬ì¡°ê°€ ìœ ì—°í•˜ì§€ ëª»í•¨

**[ ê°ì²´ ê´€ê³„ ë§¤í•‘ì˜ ê´€ì  ]**

- ì¼ëŒ€ì¼ ê´€ê³„ ì œì™¸ ì‹ë³„ ê´€ê³„ëŠ” 2ê°œ ì´ìƒì˜ ì»¬ëŸ¼ì„ ë¬¶ì€ ë³µí•©í‚¤ë¥¼ ì£¼ë¡œ ì‚¬ìš© â†’ JPAì—ì„  ë³µí•© í‚¤ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ë°œìƒ

- ë¹„ì‹ë³„ ê´€ê³„ëŠ” ëŒ€ë¦¬ í‚¤ë¥¼ ì£¼ë¡œ ì‚¬ìš©í•˜ë¯€ë¡œ @GeneratedValue ë“± í‚¤ìƒì„±ì— í¸ë¦¬í•œ ë°©ë²• ì œê³µ



#### ì‹ë³„ ê´€ê³„ì˜ ì¥ì 

- ê¸°ë³¸ í‚¤ ì¸ë±ìŠ¤ í™œìš©ì´ ì¢‹ìŒ

- ìƒìœ„ í…Œì´ë¸”ë“¤ì˜ ê¸°ë³¸ í‚¤ ì»¬ëŸ¼ì„ ê°€ì§€ê³  ìˆì–´ íŠ¹ì • ìƒí™©ì— ì¡°ì¸ ì—†ì´ ê²€ìƒ‰ ê°€ëŠ¥

  - ë¶€ëª¨ ì•„ì´ë””ê°€ Aì¸ ëª¨ë“  ìì‹ ì¡°íšŒ

  ```
  SELECT * FROM CHILD
  WHERE PARENT_ID = 'A'
  ```

  - ë¶€ëª¨ ì•„ì´ë””ê°€ Aê³  ìì‹ ì•„ì´ë””ê°€ Bì¸ ìì‹ ì¡°íšŒ

  ```
  SELECT * FROM CHILD
  WHERE PARENT_ID = 'A' AND CHILD_ID = 'B'
  ```



### ì •ë¦¬

- **ë¹„ì‹ë³„ ê´€ê³„ë¥¼ ì‚¬ìš©**í•˜ê³  ê¸°ë³¸ í‚¤ëŠ” **Long íƒ€ì…ì˜ ëŒ€ë¦¬ í‚¤ë¥¼ ì‚¬ìš©**í•˜ëŠ” ê²ƒì„ ì¶”ì²œ

- **ëŒ€ë¦¬ í‚¤**ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ì™€ ê´€ë ¨ì´ ì—†ìœ¼ë¯€ë¡œ **ìœ ì—°í•œ ëŒ€ì²˜ê°€ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì¥ì **

- **ì‹ë³„ìì˜ ë°ì´í„° íƒ€ì…ì€ Long**ì„ ì¶”ì²œ (IntegerëŠ” 20ì–µ, Longì€ 920ê²½)

- **ì„ íƒì ì¸ ë¹„ì„ ë³„ ê´€ê³„(ì™¸ë¶€ ì¡°ì¸)** ë³´ë‹¨ **í•„ìˆ˜ì  ê´€ê³„(ë‚´ë¶€ ì¡°ì¸)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œ**





## ì¡°ì¸ í…Œì´ë¸”

### ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì˜ ì—°ê´€ê´€ê³„ë¥¼ ì„¤ê³„í•˜ëŠ” ë°©ë²• í¬ê²Œ 2ê°€ì§€

- ì¡°ì¸ ì»¬ëŸ¼ ì‚¬ìš©(ì™¸ë˜ í‚¤)

- ì¡°ì¸ í…Œì´ë¸” ì‚¬ìš©(í…Œì´ë¸” ì‚¬ìš©)



### ì¡°ì¸ ì»¬ëŸ¼ ì‚¬ìš©

<img src="https://user-images.githubusercontent.com/101400894/177456290-e4024065-3529-4a55-ae71-68234d100b9b.png" alt="image" style="zoom:80%;" align="left"/>

+ LockerëŠ” nullì´ ê°€ëŠ¥(ì™¸ë˜í‚¤ null í—ˆìš©) -> ì„ íƒì  ë¹„ì‹ë³„ ê´€ê³„ ì‚¬ìš©
+ ì„ íƒì  ë¹„ì‹ë³„ ê´€ê³„ëŠ” ì¡°ì¸í•  ë•Œ ì™¸ë¶€ ì¡°ì¸(`OUTER JOIN`)ì„ ì‚¬ìš© 
+ ì‹¤ìˆ˜ë¡œ ë‚´ë¶€ ì¡°ì¸ì„ ì‚¬ìš©í•˜ë©´ ì‚¬ë¬¼í•¨ì´ ì—†ëŠ” íšŒì›ì€ ì¡°íšŒë˜ì§€ ì•ŠìŒ
+ ì•„ì£¼ ê°€ë” ê´€ê³„ë¥¼ ë§ºëŠ”ë‹¤ë©´ ì™¸ë˜ í‚¤ ê°’ ëŒ€ë¶€ë¶„ì´ nullë¡œ ì €ì¥ë˜ëŠ” ë‹¨ì 



### ì¡°ì¸ í…Œì´ë¸” ì‚¬ìš©

<img src="https://user-images.githubusercontent.com/101400894/177456673-df806b36-5b65-4acf-b96c-b40546594a2e.png" alt="image" style="zoom:80%;" align="left"/>

+ ì—°ê´€ê´€ê³„ë¥¼ ê´€ë¦¬í•˜ëŠ” ì¡°ì¸ í…Œì´ë¸”(`MEMBER_LOCKER`)ì„ ì¶”ê°€í•˜ê³  ì™¸ë˜ í‚¤ë¥¼ ê°€ì§€ê³  ê´€ë¦¬
+ ë‹¨ì ì€ í…Œì´ë¸”ì„ í•˜ë‚˜ ì¶”ê°€í•´ì•¼ í•œë‹¤ëŠ” ì , ê´€ë¦¬ í…Œì´ë¸”ê³¼ ì¡°ì¸ íšŸìˆ˜ê°€ ì¦ê°€
+ **ì¡°ì¸ í…Œì´ë¸”ì€ ì£¼ë¡œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ ì¼ëŒ€ë‹¤, ë‹¤ëŒ€ì¼ ê´€ê³„ë¡œ í’€ê¸°ìœ„í•´ ì‚¬ìš©** ê·¸ë ‡ì§€ë§Œ ì¼ëŒ€ì¼, ì¼ëŒ€ë‹¤, ë‹¤ëŒ€ì¼ ê´€ê³„ì—ì„œë„ ì‚¬ìš©ê°€ëŠ¥



ğŸ“Œ ì¡°ì¸ í…Œì´ë¸”ì„ ì—°ê²° í…Œì´ë¸”, ë§í¬ í…Œì´ë¸”ë¡œë„ ë¶€ë¦„



### ì¼ëŒ€ì¼ ì¡°ì¸ í…Œì´ë¸”

<img src="https://user-images.githubusercontent.com/101400894/177457037-2b3a76a8-fec5-410d-938c-3adec439bffd.png" alt="image" style="zoom:80%;" align="left"/>

```java
//ë¶€ëª¨
@Entity
public class Parent {
		@Id @GeneratedValue
		@Column(name = "PARENT_ID")
		private Long id;
		private String name;
	
		@OneToOne
		@JoinTable(name = "PARENT_CHILD",
				joinColumns = @JoinColumn(name = "PARENT_ID"),
				inverseJoinColumns = @JoinColumn(name = "CHILD_ID"))
		private Child child;
		...
}

//ìì‹
@Entity
public claass Child {
		@Id @GeneratedValue
		@Column(name = "CHILD_ID")
		//@OneToOne(mappedBy="child") ì–‘ë°©í–¥ìœ¼ë¡œ ë§¤í•‘í•˜ëŠ” ê²½ìš° ì‚¬ìš©
		private Long id;
		private String name;
		...
}
```

+ ì´ì „ê³¼ëŠ” ë‹¤ë¥´ê²Œ @JoinColumn  ëŒ€ì‹ ì— @JoinTableì„ ì‚¬ìš©



#### @JoinTable

+ name : ë§¤í•‘í•  ì¡°ì¸ í…Œì´ë¸”
+ joinColumns : í˜„ì¬ ì—”í‹°í‹°ë¥¼ ì°¸ì¡°í•˜ëŠ” ì™¸ë˜ í‚¤
+ inverJoinColumns : ë°˜ëŒ€ë°©í–¥ ì—”í‹°í‹°ë¥¼ ì°¸ì¡°í•˜ëŠ” ì™¸ë˜ í‚¤



### ì¼ëŒ€ë‹¤ ì¡°ì¸ í…Œì´ë¸”

> ë‹¤(N)ì™€ ê´€ë ¨ëœ ì»¬ëŸ¼ì¸ `CHILD_ID`ì— ìœ ë‹ˆí¬ ì œì•½ ì¡°ê±´ì´ í•„ìš”

<img src="https://user-images.githubusercontent.com/101400894/177457535-75f50fed-8002-4d41-b3a9-dacb4ee98e7e.png" alt="image" style="zoom:80%;" align="left"/>

```java
//ë¶€ëª¨
@Entity
public class Parent {
		@Id @GeneratedValue
		@Column(name = "PARENT_ID")
		private Long id;
		private String name;

		@OneToMany
		@JoinTable(name = "PARENT_CHILD",
				joinColumns = @JoinColumn(name = "PARENT_ID"),
				inverseJoinColumns = @JoinColumn(name = "CHILD_ID"))
		private List<Child> child = new ArrayList<Child>();
		...
}

//ìì‹
@Entity
public class Child {
		@Id @GeneratedValue
		@Column(name = "CHILD_ID")
		private Long id;
		private String name;
}
```



### ë‹¤ëŒ€ì¼ ì¡°ì¸ í…Œì´ë¸”

```java
//ë¶€ëª¨
@Entity
public class Parent {
		@Id @GeneratedValue
		@Column(name = "PARENT_ID")
		private Long id;
	  private String name;
  
	  @OneToMany(mappedBy = "parent")
	  private List<Child> child = new ArrayList<Child>();
		...
}

//ìì‹
@Entity
public class Child {
	  @Id @GeneratedValue
	  @Column(name = "CHILD_ID")
	  private Long id;
	  private String name;

	  @ManyToOne(optional = false)
	  @JoinTable(name = "PARENT_CHILD",
	    joinColumns = @JoinColumn(name = "CHILD_ID"),
	    inverseJoinColumns = @JoinColumn(name = "PARENT_ID"))
	  private Parent parent;
		...
}
```



### ë‹¤ëŒ€ë‹¤ ì¡°ì¸ í…Œì´ë¸”

> ì¡°ì¸ í…Œì´ë¸”ì˜ ë‘ ì»¬ëŸ¼ì„ í•©í•´ í•˜ë‚˜ì˜ ë³µí•© ìœ ë‹ˆí¬ ì œì•½ì¡°ê±´ ì„¤ì •
>
> > í˜„ì¬ PARENT_ID, CHILD_IDëŠ” ë³µí•© ê¸°ë³¸í‚¤ì´ë¯€ë¡œ ìœ ë‹ˆí¬ ì œì•½ ì¡°ê±´ì´ ê±¸ë ¤ìˆìŒ

<img src="https://user-images.githubusercontent.com/101400894/177457897-7a07b3b3-e40e-4930-a778-2b52fdb62a55.png" alt="image" style="zoom:80%;" align="left"/>



```java
//ë¶€ëª¨
@Entity
public class Parent {
		@Id @GeneratedValue
		@Column(name = "PARENT_ID")
		private Long id;
		private String name;
		
		@ManyToMany
		@JoinTable(name = "PARENT_CHILD",
				joinColumns = @JoinColumn(name = "PARENT_ID"),
				inverseJoinColumns = @JoinColumn(name = "CHILD_ID"))
		private List<Child> child = new ArrayList<Child>();
		...
}

//ìì‹
@Entity
public class Child {
		@Id @GeneratedValue
		@Column(name = "CHILD_ID")
		private Long id;
		private String name;
		...
}
```



ğŸ“Œì¡°ì¸í…Œì´ë¸”ì— ì»¬ëŸ¼ì„ ì¶”ê°€í•˜ë©´ @JoinTable ì „ëµì„ ì‚¬ìš© ëª»í•¨, ìƒˆë¡œìš´ ì—”í‹°í‹°ë¥¼ ë§Œë“¤ì–´ ë§¤í•‘



## ì—”í‹°í‹° í•˜ë‚˜ì— ì—¬ëŸ¬ í…Œì´ë¸” ë§¤í•‘

>  @SecondaryTableì„ ì‚¬ìš©í•˜ë©´ í•œ ì—”í‹°í‹°ì— ì—¬ëŸ¬ í…Œì´ë¸”ì´ ë§¤í•‘ ê°€ëŠ¥(ì˜ ì‚¬ìš©í•˜ì§„ ì•ŠìŒ)

<img src="https://user-images.githubusercontent.com/101400894/177458382-d2da0369-7f31-42dc-9f75-f6d30f6fdb85.png" alt="image" style="zoom:80%;" align="left"/>

```java
@Entity
@Table(name = "BOARD")
@SecondaryTable(name = "BOARD_DETAIL",
		pkJoinColumns = @PrimaryKeyJoinColumn(name = "BOARD_DETAIL_ID"))
public class Board {
		@Id @GeneratedValue
		@Column(name = "BOARD_ID")
		private Long id;
		private String title;

		@Column(table = "BOARD_DETAIL")
		private String content;
		...
}
```

- @Tableì„ ì‚¬ìš©í•´ì„œ BOARD í…Œì´ë¸”ê³¼ ë§¤í•‘

- @SecondaryTableì„ ì‚¬ìš©í•´ì„œ BOARD_DETAIL í…Œì´ë¸”ì„ ì¶”ê°€ë¡œ ë§¤í•‘



#### @SecondaryTable ì†ì„±

- `@SecondaryTable.name` : ë§¤í•‘í•  ë‹¤ë¥¸ í…Œì´ë¸” ì´ë¦„ (`BOARD_DETAIL`)

- `@SecondaryTable.pkJoinColumns` : ë§¤í•‘í•  ë‹¤ë¥¸ í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ ì»¬ëŸ¼ ì†ì„± (`BOARD_DETAIL_ID`)

- `@Column(table = "BOARD_DETAIL")`: `BOARD_DETAIL`ì˜ ì»¬ëŸ¼ ë§¤í•‘, ì§€ì • ì•ˆí•˜ë©´ `BOARD` ë§¤í•‘
- `@SecondaryTables` : ë” ë§ì€ í…Œì´ë¸”ì— ë§¤í•‘í•  ë•Œ ì‚¬ìš©

```
@SecondaryTables({
		@SecondaryTable(name="BOARD_DETAIL"),
		@SecondaryTable(name="BOARD_FILE")
})
```

